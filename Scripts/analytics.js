/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

(function () {
    var getAntiForgery = function () {
        return $('.js-analytics--anti-forgery').html();
    }

    var cleanUrl = function (url) {
        return url.replace(window.location.protocol + '//', '').replace(window.location.hostname, '').replace(':' + window.location.port, '');
    };

    var getUrl = function () {
        return cleanUrl(window.location.href);
    };

    var getData = function () {
        var data = '__RequestVerificationToken=' + encodeURIComponent(getAntiForgery()) +
            '&Url=' + encodeURIComponent(getUrl());
        return data;
    };

    var send = function () {
        var request = new XMLHttpRequest();
        request.open('POST', '/views/record', true);
        request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
        request.send(getData());
    };

    var init = function () {
        send();
    };

    var ready = function (fn) {
        if (document.readyState != 'loading') {
            fn();
        } else if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', fn);
        } else {
            document.attachEvent('onreadystatechange', function () {
                if (document.readyState != 'loading')
                    fn();
            });
        }
    }

    ready(init);
}());
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuYWx5dGljcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQUFMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYW5hbHl0aWNzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBnZXRBbnRpRm9yZ2VyeSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gJCgnLmpzLWFuYWx5dGljcy0tYW50aS1mb3JnZXJ5JykuaHRtbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBjbGVhblVybCA9IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICByZXR1cm4gdXJsLnJlcGxhY2Uod2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJywgJycpLnJlcGxhY2Uod2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLCAnJykucmVwbGFjZSgnOicgKyB3aW5kb3cubG9jYXRpb24ucG9ydCwgJycpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgZ2V0VXJsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBjbGVhblVybCh3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBnZXREYXRhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkYXRhID0gJ19fUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuPScgKyBlbmNvZGVVUklDb21wb25lbnQoZ2V0QW50aUZvcmdlcnkoKSkgK1xyXG4gICAgICAgICAgICAnJlVybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGdldFVybCgpKTtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHNlbmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0Lm9wZW4oJ1BPU1QnLCAnL3ZpZXdzL3JlY29yZCcsIHRydWUpO1xyXG4gICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCcpO1xyXG4gICAgICAgIHJlcXVlc3Quc2VuZChnZXREYXRhKCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZW5kKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciByZWFkeSA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9ICdsb2FkaW5nJykge1xyXG4gICAgICAgICAgICBmbigpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZm4pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmF0dGFjaEV2ZW50KCdvbnJlYWR5c3RhdGVjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSAnbG9hZGluZycpXHJcbiAgICAgICAgICAgICAgICAgICAgZm4oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlYWR5KGluaXQpO1xyXG59KCkpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
