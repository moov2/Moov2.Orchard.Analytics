/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

(function () {
    var getAntiForgery = function () {
        return $('.js-analytics--anti-forgery').html();
    }

    var getContentItemId = function () {
        return $('.js-analytics--content-item-id').html();
    };

    var cleanUrl = function (url) {
        return url.replace(window.location.protocol + '//', '').replace(window.location.hostname, '').replace(':' + window.location.port, '');
    };

    var getUrl = function () {
        return cleanUrl(window.location.href);
    };

    var getData = function () {
        var data = '__RequestVerificationToken=' + encodeURIComponent(getAntiForgery()) +
            '&Url=' + encodeURIComponent(getUrl()) +
            '&ContentItemId=' + encodeURIComponent(getContentItemId());
        return data;
    };

    var send = function () {
        var request = new XMLHttpRequest();
        request.open('POST', '/views/record', true);
        request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
        request.send(getData());
    };

    var init = function () {
        send();
    };

    var ready = function (fn) {
        if (document.readyState != 'loading') {
            fn();
        } else if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', fn);
        } else {
            document.attachEvent('onreadystatechange', function () {
                if (document.readyState != 'loading')
                    fn();
            });
        }
    }

    ready(init);
}());
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuYWx5dGljcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQUFMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFuYWx5dGljcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZ2V0QW50aUZvcmdlcnkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICQoJy5qcy1hbmFseXRpY3MtLWFudGktZm9yZ2VyeScpLmh0bWwoKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZ2V0Q29udGVudEl0ZW1JZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gJCgnLmpzLWFuYWx5dGljcy0tY29udGVudC1pdGVtLWlkJykuaHRtbCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgY2xlYW5VcmwgPSBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgcmV0dXJuIHVybC5yZXBsYWNlKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICcvLycsICcnKS5yZXBsYWNlKHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSwgJycpLnJlcGxhY2UoJzonICsgd2luZG93LmxvY2F0aW9uLnBvcnQsICcnKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGdldFVybCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gY2xlYW5Vcmwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgZ2V0RGF0YSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGF0YSA9ICdfX1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbj0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGdldEFudGlGb3JnZXJ5KCkpICtcclxuICAgICAgICAgICAgJyZVcmw9JyArIGVuY29kZVVSSUNvbXBvbmVudChnZXRVcmwoKSkgK1xyXG4gICAgICAgICAgICAnJkNvbnRlbnRJdGVtSWQ9JyArIGVuY29kZVVSSUNvbXBvbmVudChnZXRDb250ZW50SXRlbUlkKCkpO1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgc2VuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcXVlc3Qub3BlbignUE9TVCcsICcvdmlld3MvcmVjb3JkJywgdHJ1ZSk7XHJcbiAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04Jyk7XHJcbiAgICAgICAgcmVxdWVzdC5zZW5kKGdldERhdGEoKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbmQoKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHJlYWR5ID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gJ2xvYWRpbmcnKSB7XHJcbiAgICAgICAgICAgIGZuKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmbik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYXR0YWNoRXZlbnQoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9ICdsb2FkaW5nJylcclxuICAgICAgICAgICAgICAgICAgICBmbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZHkoaW5pdCk7XHJcbn0oKSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
